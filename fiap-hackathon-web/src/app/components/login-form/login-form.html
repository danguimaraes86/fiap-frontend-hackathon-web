<h2 mat-dialog-title>Login</h2>
<mat-dialog-content>
  <form [formGroup]="loginForm" class="d-flex flex-column gap-3 py-3">
    <mat-form-field appearance="outline" class="w-100">
      <mat-label>E-mail</mat-label>
      <input matInput type="email" formControlName="email" placeholder="seu@email.com" />
      <mat-icon matPrefix>email</mat-icon>
      @if (loginForm.get('email')?.hasError('required')) {
        <mat-error> E-mail é obrigatório </mat-error>
      }
      @if (loginForm.get('email')?.hasError('email')) {
        <mat-error> E-mail inválido </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="w-100">
      <mat-label>Senha</mat-label>
      <input
        matInput
        [type]="hidePassword ? 'password' : 'text'"
        formControlName="senha"
        placeholder="Digite sua senha"
      />
      <mat-icon matPrefix>lock</mat-icon>
      <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button">
        <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>
      @if (loginForm.get('senha')?.hasError('required')) {
        <mat-error> Senha é obrigatória </mat-error>
      }
      @if (loginForm.get('senha')?.hasError('minlength')) {
        <mat-error> Senha deve ter no mínimo 6 caracteres </mat-error>
      }
    </mat-form-field>

    <div class="d-flex justify-content-end">
      <a href="#" class="mat-text-primary text-decoration-none">Esqueceu a senha?</a>
    </div>
  </form>
</mat-dialog-content>

@if (isLoading()) {
  <mat-dialog-actions align="center">
    <mat-spinner diameter="40" />
  </mat-dialog-actions>
} @else {
  <mat-dialog-actions align="end">
    <button matButton="" mat-dialog-close>Cancelar</button>
    <button matButton="filled" (click)="onSubmit()" [disabled]="loginForm.invalid">
      Cadastrar
    </button>
  </mat-dialog-actions>
}
